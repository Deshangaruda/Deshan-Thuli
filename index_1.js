 // Token Database with 10 unique tokens
        const tokenDatabase = {
            // Default content (when no token is provided)
            "default": {
                message: "Welcome to my gratitude website for teachers. Please enter a valid token to access personalized content.",
                images: ["default1.jpg", "default2.jpg"],
                results: [
                    { subject: "Mathematics", grade: "Not Available", teacher: "N/A" },
                    { subject: "Science", grade: "Not Available", teacher: "N/A" },
                    { subject: "English", grade: "Not Available", teacher: "N/A" }
                ]
            },

            // Token 1
            "THULI001_M": {
                message: "ආදරණීය ගුරු මෑණියණි,\n\nYour guidance in English has been invaluable. මාගේ ජීවිතයේ අකමැතිම විෂය වී තිබුණු English විෂයට කැමැත්තක් හා උනන්දුවක් ඇති වුයේ මා 7 ශ්‍රේණියේදි ඔබ English වලට කියාදුන් කෙටි ක්‍රම නිසායි.නමුත් මා තුළ English පිළිබද දැනුම මගහැරී තිබූ නිසා ඔබ පවසන දෙය වැටහී ගියත් එය බාවිතා කිරීමට හෝ වැඩිදුරටත් තේරුම් ගැනීමට නොහැකි විය.ඔබ සැමවිටම වාර විභාගයේ English ළකුණු අඩු  යැයි පැවසුවත් මා එය වැඩිපුර නොසිතුවේ එය එතරම් වැදගත් නොවෙ යැයි සිතායි.නමුත් 9 ශ්‍රේණියේදි මා හට පැවති මානසික ව්‍යාකූලතාවය නිසා මා ඉන් මිදීමට ඉගෙනීමට යොමු විය(මේ පිලිබදව කිසිවෙකු නොදනී...!).එලෙස මාගේ මනස පාලනයට මා යොමු වූවත් English විෂයට ලකුණු නොමැති වීම නිසා මා මහත් අපහසුතාවයට පත්විය.ඒ නිසා මට තවත් අභියෝගයක් වූ මේ විෂය ඉගෙනීමට ගුරුතුමියගෙන් උපකාර ලබා ගැනිමට සිතුනත් මා එයට බිය විය.9/10 ශ්‍රේණිවලදීත් මෙහි කිසිදු වෙනසක් සිදු නොවී පසුතැවිල්ලෙන් කාලය ගෙවී ගියේය.නමුත් ඔබ සැමවිටම ලකුණු මදි්‍ යැයි පැවසන වදන් පමණක් මාගේ උනන්දුව හා ගුරුතුමියගෙන් උපකාර ඉල්ලිමට ඇති බියත් වැඩි කර වූයේය.ගුරුතුමියට මා පිලිබද උනන්වදුවක් ඇති වූයේත් english විෂය පිලිබද මාගේ කැමැත්ත වැඩි වූයේත්  second term test එකට engish වලට ලකුණු 64ක් ගත් පසු බව මට සිතෙයි.ඉන් පසු ගුරුතුමිය මට english වල නොතේරෙන දේවල් පේපර් වලට පිලිතුරු ලියන විදිහ ගුරුතුමියගේ වටිනා කාලය කැපකරමින් මා හට ඉගැන්වූ අයුරු මට මගේ ජීවිතයේ සදා අමරණීය මතකයන්‍ ය. ගුරුතුමිය මට අනිත් ළමයි ඉදිරියේ බැන්නත් මම නැති තැන මගේ හොද පවසන බව මට එක් යාලුවෙක් පැවසුවා.නමුත් එහි සත්‍යතාව මා නොදන්නා නමුත් මාතුල ගුරුවරුන්ට ඇති ගෞරවය හා ආදරය නිසා මම එය සත්‍යය යැයි සිතමි.ගුරුතුමිය පන්තිභාර අවදියේදී ලබා දුන් උපදෙස් මාගේ වැරදි හදා ගැනිමට මට බෙහෙවින් උපකාර විය.මා හට සතුට කියන දෙය අහිමි වුවත් ගුරුතුමිය අසල සිටින විට මට සතුටින් සිටියේය.ඒ මට ඔබ කෙරෙහි තිබු විශ්වාසයක්,ආදරයත්,ගෞරවයත් නිසායි,ආදරණීය ගුරු මෑණියනි මා මගේ මවට ආදරය,ගෞරවය දක්වනවා මෙන් ගුරුතුමියට ද ආදරය,ගෞරවය දක්වමි.ගුරු මැණියනි මම දිනක ඔබ මා වෙනුවෙන් කල කැප කිරීම් වලට කෘතගුණ දක්වමි.මා වඩාත් ආදරය කරන විශ්වාස කරන ගුරුවරයා -Mis.Madhavi - බව මා මෙසේ සටහන් තබමි.  \n\nWith gratitude,\nThuli",
                images: ["math-class.jpg", "science-lab.jpg", "school-event1.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 2
            "THULI002": {
                message: "Respected Teacher,\n\nYour English lessons were always engaging and helped me improve my language skills significantly. Thank you for your encouragement!\n\nSincerely,\nThuli",
                images: ["english-class.jpg", "library.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 3
            "THULI003": {
                message: "To my ICT Teacher,\n\nYour innovative teaching methods made learning technology exciting. Thank you for preparing me for the digital world!\n\nBest regards,\nThuli",
                images: ["computer-lab.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 4
            "THULI004": {
                message: "Dear Commerce Teacher,\n\nYour real-world examples made complex business concepts easy to understand. Thank you for your practical approach!\n\nGratefully,\nThuli",
                images: ["commerce-class.jpg", "business-fair.jpg", "field-trip1.jpg", "award-ceremony.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 5
            "THULI005": {
                message: "To my Geography Teacher,\n\nYour passion for the subject was contagious. Thank you for making our planet's wonders come alive in the classroom!\n\nWarm regards,\nThuli",
                images: ["geography-field.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 6
            "THULI006": {
                message: "Dear Dancing Instructor,\n\nThank you for helping me express myself through movement and for your patience during rehearsals. You've helped build my confidence!\n\nWith appreciation,\nThuli",
                images: ["dance-performance.jpg", "cultural-event.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 7
            "THULI007": {
                message: "To my Science Teachers,\n\nYour experiments and demonstrations made learning fun and memorable. Thank you for sparking my curiosity about the natural world!\n\nRespectfully,\nThuli",
                images: ["science-experiment.jpg", "lab-work.jpg", "science-fair.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 8
            "THULI008": {
                message: "Dear Literature Teacher,\n\nThank you for opening my eyes to the beauty of words and stories. Your interpretations added depth to every text we studied.\n\nYours sincerely,\nThuli",
                images: ["literature-class.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 9
            "THULI009": {
                message: "To my Health Education Teacher,\n\nThank you for teaching me the importance of wellness and for your caring approach to student well-being.\n\nWith thanks,\nThuli",
                images: ["sports-day.jpg", "health-class.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Token 10
            "THULI010": {
                message: "Dear Media Studies Teacher,\n\nYour insights into communication and media literacy have been invaluable. Thank you for preparing me for the modern world!\n\nBest wishes,\nThuli",
                images: ["media-class.jpg", "presentation-day.jpg", "project-work.jpg"],
                results: [
                    { subject: "Mathematics", grade: "soon", teacher: "" },
                    { subject: "Science", grade: "soon", teacher: "" },
                    { subject: "History", grade: "soon", teacher: "" },
                    { subject: "English", grade: "soon", teacher: "" },
                    { subject: "Sinhala", grade: "soon", teacher: "" },
                    { subject: "ICT", grade: "soon", teacher: "" },
                    { subject: "Art", grade: "soon", teacher: "" },
                    { subject: "Geography", grade: "soon", teacher: "" },
                    { subject: "Buddahish", grade: "soon", teacher: "" }
                ]
            },

            // Admin token (hidden from regular users)
            "THULIADMIN": {
                message: "ADMIN ACCESS - User management panel activated",
                images: [],
                results: [],
                isAdmin: true
            }
        };

        // Mock user data for admin panel
        const userData = [
            { username: "Mr. Perera", token: "THULI001", lastAccess: new Date().toLocaleString() },
            { username: "Mrs. Johnson", token: "THULI002", lastAccess: new Date(Date.now() - 86400000).toLocaleString() },
            { username: "Mr. Rajapakse", token: "THULI003", lastAccess: new Date(Date.now() - 172800000).toLocaleString() },
            { username: "Mrs. Rathnayake", token: "THULI004", lastAccess: new Date(Date.now() - 259200000).toLocaleString() },
            { username: "Ms. Herath", token: "THULI005", lastAccess: new Date(Date.now() - 345600000).toLocaleString() },
            { username: "Mrs. Premaratne", token: "THULI006", lastAccess: new Date(Date.now() - 432000000).toLocaleString() },
            { username: "Mrs. Silva", token: "THULI007", lastAccess: new Date(Date.now() - 518400000).toLocaleString() },
            { username: "Ms. Gamage", token: "THULI008", lastAccess: new Date(Date.now() - 604800000).toLocaleString() },
            { username: "Mr. Weerasinghe", token: "THULI009", lastAccess: new Date(Date.now() - 691200000).toLocaleString() },
            { username: "Ms. Fonseka", token: "THULI010", lastAccess: new Date(Date.now() - 777600000).toLocaleString() },
            { username: "Guest User", token: "", lastAccess: new Date(Date.now() - 86400000).toLocaleString() }
        ];

        // DOM Elements
        const tokenForm = document.getElementById('tokenForm');
        const tokenInput = document.getElementById('token');
        const clearTokenBtn = document.getElementById('clearToken');
        const contentContainer = document.getElementById('contentContainer');
        const adminSection = document.getElementById('adminSection');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const mobileNav = document.querySelector('.mobile-nav');
        const backToTopBtn = document.querySelector('.back-to-top');

        // Gallery variables
        let currentSlide = 0;
        let slideInterval;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Loading animation will disappear after 3 seconds
            setTimeout(function() {
                document.querySelector('.loader').style.display = 'none';
            }, 3000);

            // Mobile menu toggle
            mobileMenuBtn.addEventListener('click', function() {
                mobileNav.classList.toggle('active');
                this.querySelector('i').classList.toggle('fa-times');
                this.querySelector('i').classList.toggle('fa-bars');
            });

            // Close mobile menu when clicking a link
            document.querySelectorAll('.mobile-nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNav.classList.remove('active');
                    mobileMenuBtn.querySelector('i').classList.remove('fa-times');
                    mobileMenuBtn.querySelector('i').classList.add('fa-bars');
                });
            });

            // Back to top button
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });

            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Clear token button
            clearTokenBtn.addEventListener('click', () => {
                tokenInput.value = '';
                tokenInput.focus();
            });

            // Token form submission
            tokenForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const username = document.getElementById('username').value.trim();
                const token = tokenInput.value.trim().toUpperCase();

                // Validate username
                if (!username) {
                    alert('Please enter your name');
                    return;
                }

                // Hide form with animation
                tokenForm.classList.add('hidden');
                document.querySelector('.book-content').classList.add('hidden');

                // Show content after form hides
                setTimeout(() => {
                    document.querySelector('.thank-you-section').classList.add('visible');
                    contentContainer.classList.add('visible');
                    loadContent(token);

                    // Track access
                    trackUserAccess(username, token);

                    // Admin check
                    if (token === 'THULIADMIN') {
                        adminSection.style.display = 'block';
                        loadUserData();
                    } else {
                        adminSection.style.display = 'none';
                    }

                    // Smooth scroll to content
                    contentContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            });

            // Panel switching
            const panelButtons = document.querySelectorAll('.panel-btn');
            const panels = document.querySelectorAll('.panel');

            panelButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const panelId = this.getAttribute('data-panel');

                    // Remove active class from all buttons and panels
                    panelButtons.forEach(btn => btn.classList.remove('active'));
                    panels.forEach(panel => panel.classList.remove('active'));

                    // Add active class to clicked button and corresponding panel
                    this.classList.add('active');
                    document.getElementById(panelId + 'Panel').classList.add('active');
                });
            });

            // Activate first panel by default
            if (panelButtons.length > 0) {
                panelButtons[0].click();
            }

            // Gallery navigation
            setupGallery();

            // Admin panel buttons
            document.getElementById('refreshUsers')?.addEventListener('click', loadUserData);
            document.getElementById('exportData')?.addEventListener('click', exportUserData);

            // Save message button functionality
            document.querySelector('.save-btn')?.addEventListener('click', function() {
                const message = document.querySelector('.message-panel textarea').value;
                if (message.trim()) {
                    alert('Message saved! In a real implementation, this would be stored on the server.');
                } else {
                    alert('Please enter a message to save.');
                }
            });
        });

        // Function to load content based on token
        function loadContent(token) {
            // Get content for the token or default if not found
            const content = tokenDatabase[token] || tokenDatabase['default'];

            // Update message panel
            document.querySelector('.message-panel textarea').value = content.message;

            // Update gallery panel
            updateGallery(content.images);

            // Update results panel
            updateResults(content.results);

            // Apply token-specific effects
            applyTokenEffects(token);
        }

        // Function to apply token-specific effects
        function applyTokenEffects(token) {
            // Remove all token-specific classes first
            document.body.classList.remove(
                'token-THULI001:M', 'token-THULI002', 'token-THULI003', 
                'token-THULI004', 'token-THULI005', 'token-THULI006',
                'token-THULI007', 'token-THULI008', 'token-THULI009',
                'token-THULI010', 'token-THULIADMIN', 'admin-mode'
            );

            // Add class for current token
            if (token && token !== 'DEFAULT') {
                document.body.classList.add(`token-${token}`);
            }

            // Special case for admin
            if (token === 'THULIADMIN') {
                document.body.classList.add('admin-mode');
            }
        }

        // Function to update the gallery with images
        function updateGallery(images) {
            const galleryContainer = document.querySelector('.gallery-container');
            galleryContainer.innerHTML = '';

            // If no images, show a message
            if (images.length === 0) {
                galleryContainer.innerHTML = `
                    <div class="gallery-slide" style="display: flex; justify-content: center; align-items: center;">
                        <p>No images available</p>
                    </div>
                `;
                return;
            }

            // Add images to gallery
            images.forEach((img, index) => {
                galleryContainer.innerHTML += `
                    <div class="gallery-slide">
                        <img src="images/${img}" alt="Gallery Image ${index + 1}">
                    </div>
                `;
            });

            // Update gallery indicators
            updateGalleryIndicators(images.length);

            // Reset to first slide
            currentSlide = 0;
            showSlide(currentSlide);
        }

        // Function to setup gallery navigation
        function setupGallery() {
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            const galleryContainer = document.querySelector('.gallery-container');

            // Previous button click
            prevBtn?.addEventListener('click', function() {
                showSlide(currentSlide - 1);
                resetSlideInterval();
            });

            // Next button click
            nextBtn?.addEventListener('click', function() {
                showSlide(currentSlide + 1);
                resetSlideInterval();
            });

            // Touch events for mobile swipe
            let touchStartX = 0;
            let touchEndX = 0;

            galleryContainer?.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });

            galleryContainer?.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });

            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    // Swipe left - next slide
                    showSlide(currentSlide + 1);
                } else if (touchEndX > touchStartX + 50) {
                    // Swipe right - previous slide
                    showSlide(currentSlide - 1);
                }
                resetSlideInterval();
            }

            // Start auto slide
            startSlideInterval();
        }

        // Function to show a specific slide
        function showSlide(index) {
            const slides = document.querySelectorAll('.gallery-slide');
            const indicators = document.querySelectorAll('.gallery-indicator span');
            const totalSlides = slides.length;

            if (totalSlides === 0) return;

            // Wrap around if at ends
            if (index >= totalSlides) {
                index = 0;
            } else if (index < 0) {
                index = totalSlides - 1;
            }

            // Update current slide
            currentSlide = index;

            // Scroll to slide
            slides[index].scrollIntoView({
                behavior: 'smooth',
                block: 'nearest',
                inline: 'center'
            });

            // Update indicators
            indicators.forEach((indicator, i) => {
                indicator.classList.toggle('active', i === index);
            });
        }

        // Function to update gallery indicators
        function updateGalleryIndicators(count) {
            const indicatorContainer = document.querySelector('.gallery-indicator');
            if (!indicatorContainer) return;

            indicatorContainer.innerHTML = '';

            for (let i = 0; i < count; i++) {
                indicatorContainer.innerHTML += `
                    <span data-index="${i}" class="${i === 0 ? 'active' : ''}"></span>
                `;
            }

            // Add click event to indicators
            document.querySelectorAll('.gallery-indicator span').forEach(indicator => {
                indicator.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    showSlide(index);
                    resetSlideInterval();
                });
            });
        }

        // Function to start auto slide
        function startSlideInterval() {
            const slides = document.querySelectorAll('.gallery-slide');
            if (slides.length > 1) {
                clearInterval(slideInterval);
                slideInterval = setInterval(() => {
                    showSlide(currentSlide + 1);
                }, 5000);
            }
        }

        // Function to reset auto slide interval
        function resetSlideInterval() {
            clearInterval(slideInterval);
            startSlideInterval();
        }

        // Function to update results table
        function updateResults(results) {
            const resultsTable = document.querySelector('.results-table tbody');
            if (!resultsTable) return;

            resultsTable.innerHTML = '';

            results.forEach(result => {
                resultsTable.innerHTML += `
                    <tr>
                        <td>${result.subject}</td>
                        <td>${result.grade}</td>
                        <td>${result.teacher}</td>
                    </tr>
                `;
            });
        }

        // Function to track user access (mock implementation)
        function trackUserAccess(username, token) {
            // In a real app, this would send data to a server
            console.log(`User accessed: ${username} with token: ${token || 'Default'}`);

            // Update admin panel if visible
            if (adminSection.style.display === 'block') {
                loadUserData();
            }
        }

        // Function to load user data in admin panel
        function loadUserData() {
            const userTable = document.querySelector('.user-table tbody');
            if (!userTable) return;

            userTable.innerHTML = '';

            userData.forEach(user => {
                userTable.innerHTML += `
                    <tr>
                        <td>${user.username}</td>
                        <td>${user.token || 'Default'}</td>
                        <td>${user.lastAccess}</td>
                        <td>
                            <button class="admin-action-btn view-btn" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="admin-action-btn message-btn" title="Message">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });

            // Update user count
            const totalUsersElement = document.getElementById('totalUsers');
            if (totalUsersElement) {
                totalUsersElement.textContent = userData.length;
            }

            // Add event listeners to action buttons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const username = row.cells[0].textContent;
                    const token = row.cells[1].textContent;
                    alert(`Viewing details for ${username}\nToken: ${token}`);
                });
            });

            document.querySelectorAll('.message-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const username = row.cells[0].textContent;
                    alert(`Messaging feature would open for ${username}`);
                });
            });
        }

        // Function to export user data
        function exportUserData() {
            // In a real app, this would generate a CSV or similar
            alert('Exporting user data... This would download a file in a real implementation.');
            console.log('Exporting user data:', userData);
        }